
________________

________________
3)	—оздать следующие модели дл€ бронировани€ комнат в отеле и сделать миграции:

class Room(models.Model):
    number = models.CharField(max_length=10)
    is_booked = models.BooleanField(default=False)
    hotel = models.ForeignKey(
        to='Hotel',
        on_delete=models.CASCADE,
        related_name='rooms',
    )

    def __str__(self):
        return f" {self.number} {self.hotel}"


class Booking(models.Model):
    start_date = models.DateField()
    end_date = models.DateField()
    customer_full_name = models.CharField(max_length=255)
    room = models.ForeignKey(
        to=Room,
        on_delete=models.CASCADE,
        related_name='bookings',
    )

    def __str__(self):
        return f" {self.start_date} {self.end_date}"

py manage.py makemigrations
py manage.py migrate
________________
4)	—оздать view и url дл€ сохранени€ в базу информации о бронировании в отеле. ¬ параметре пути передать название 
отел€ и id пользовател€ и номер в отеле который хочет забронировать( в дальнейшем это будет реализовано через форму). 
ѕолучить информацию о пользователе и о отеле. ¬ случае не существовани€ пользовател€ или отел€ вывести ошибки в консоль. 
ƒалее транзакционно бронируем комнату в отеле, в случае если данна€ комната уже забронирована сообщаем об этом пользователю 
и откатываем транзакцию.

def book_room_view(request, hotel_id=1, user_id=1, room_number=1):
    hotel = Hotel.objects.get(pk=hotel_id)
    room = Room.objects.get(hotel=hotel, number=room_number)

    if room.is_booked:
        return HttpResponse("Room is already booked.", status=400)

    with transaction.atomic():
        booking = Booking.objects.create(
            start_date=request.POST['start_date'],
            end_date=request.POST['end_date'],
            customer_full_name=f"{request.POST['first_name']} {request.POST['last_name']}",
            room=room,
            user_id=user_id
        )

    room.is_booked = True
    room.save()

    return HttpResponse("Booking successful")

________________

